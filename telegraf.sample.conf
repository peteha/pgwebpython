# Telegraf configuration to monitor pgwebpython
# 1) Basic HTTP response check
[[inputs.http_response]]
  address = "http://127.0.0.1/healthz"
  response_timeout = "5s"
  method = "GET"
  expected_status_codes = [200]
  # tags
  [inputs.http_response.tags]
    service = "pgwebpython"

# 2) Scrape Prometheus metrics exposed by the app (requires prometheus-flask-exporter)
[[inputs.prometheus]]
  urls = ["http://127.0.0.1/metrics"]
  ## optional: metric version 2 for newer label handling
  metric_version = 2
  # tags
  [inputs.prometheus.tags]
    service = "pgwebpython"

# Output example (InfluxDB)
# [[outputs.influxdb_v2]]
#   urls = ["http://127.0.0.1:8086"]
#   token = "YOUR_TOKEN"
#   organization = "YOUR_ORG"
#   bucket = "telegraf"
